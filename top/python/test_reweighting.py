from Jawa import MWTemplate
from ROOT import TFile, TTree, TCut, TPaveText, TLine

f = TFile("/user2/sfarry/workspaces/top/output.root")
t = f.Get("topTuple")

mwt = MWTemplate("top_eft")
mwt.AddTree(t)
mwt.ApplyCut()
mwt.AddVar("top_rap", "abs(top_rap)", 50, 0, 4)
mwt.AddVar("antitop_rap", "abs(antitop_rap)", 50, 0, 4)
for i in range(18):
    mwt.AddWeight("rwgt_"+str(i+1), "rwgt_"+str(i+1))
mwt.FillVars()
mwt.Scale(1.0/t.GetEntries())
mwt.ScaleAllWeights(1.0/t.GetEntries())
mwt.SaveToFile()

fwd = TCut("abs(top_rap) > abs(antitop_rap)")
bwd = TCut("abs(top_rap) < abs(antitop_rap)")

lhcb = TCut("top_rap > 2.0 && top_rap < 4.5 && antitop_rap > 2.0 && antitop_rap < 4.5")
gpd  = TCut("abs(top_rap) < 2.5 && abs(antitop_rap) < 2.5")

c13qq_label = TPaveText(0.2,0.38,0.33, 0.5, 'NDC')
c13qq_label.AddText('C^{(1,3)}_{qq}')

line = TLine(0.0, 1.0, 5.0, 1.0)
line.SetLineStyle(2)
line.SetLineColor(1)

'''
mwt_fwd = MWTemplate("top_eft_fwd")
mwt_fwd.AddTree(f.Get("topTuple"))
mwt_fwd.ApplyCut()
mwt_fwd.AddVar("top_rap", "abs(top_rap)", 100, 0, 5)
mwt_fwd.AddWeight("central", "w")
for i in range(24):
    mwt_fwd.AddWeight("rwgt_"+str(i+1), "rwgt_"+str(i+1))
mwt_fwd.FillVars()
mwt_fwd.SaveToFile()
'''

from Style import *
SetLHCbStyle()

from PlotTools import *
p = Plot([ mwt.GetWeightHist("top_rap", "rwgt_"+str(i+1)) for i in range(11)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'test.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 6, 9, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(12)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12] })
p.setProp('ycomplims', [0.8, 1.15])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,2,3)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C13qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.5, 1.49])
#p.setProp('extraObjs',  [ c13qq_label])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{1,3}_{qq} = 0', 'C^{1,3}_{qq} = +4', 'C^{1,3}_{qq} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,4,5)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C81qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{8,1}_{qq} = 0', 'C^{8,1}_{qq} = +4', 'C^{8,1}_{qq} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,6,7)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C83qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{8,3}_{qq} = 0', 'C^{8,3}_{qq} = +4', 'C^{8,3}_{qq} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,8,9)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C8ut.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{8}_{ut} = 0', 'C^{8}_{ut} = +4', 'C^{8}_{ut} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,10,11)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C8dt.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{8}_{dt} = 0', 'C^{8}_{dt} = +4', 'C^{8}_{dt} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,12,13)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C1qu.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{1}_{qu} = 0', 'C^{1}_{qu} = +4', 'C^{1}_{qu} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,14,15)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C1qd.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{1}_{qd} = 0', 'C^{1}_{qd} = +4', 'C^{1}_{qd} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)) for i in (1,16,17)])
for pp in p.plots: pp.UseCurrentStyle()
p.AutoYlims(ylow=0.000001)
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_C1qt.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.setProp('compObjs',  [ line])
p.setProp('labels', ['C^{1}_{qt} = 0', 'C^{1}_{qt} = +4', 'C^{1}_{qt} = -4'])
p.setProp('ylabel', '#sigma [pb]')
p.setProp('xlabel', 'y (top)')
p.setProp('leglims', [0.7, 0.6, 0.9, 0.9])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,2,3)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C13qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,4,5)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C81qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,6,7)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C83qq.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,8,9)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C8ut.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,10,11)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C8dt.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,12,13)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C1qu.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()


p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,14,15)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C1qd.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()

p = Plot([mwt.GetWeightHist("top_rap", "rwgt_"+str(i)).GetAsymmetry(mwt.GetWeightHist("antitop_rap", "rwgt_"+str(i))) for i in (1,16,17)])
for pp in p.plots: pp.UseCurrentStyle()
p.setProp('forcestyle', True)
p.setProp('filename', 'topeft_asymm_C1qt.pdf')
p.setProp('location', '/user2/sfarry/workspaces/top/figures')
p.setProp('colors', [1, 2, 2, 4, 4, 6, 6, 9, 9, 40, 40, 41, 41, 42, 42, 43, 43, 44, 44, 45, 45, 46, 46, 47, 47, 48, 48, 49, 49, 30, 31, 32, 33])
p.setProp('drawOpts', ['hist' for i in range(17)])
p.setProp('fillstyles', 0)
p.setProp('toCompare', { 0 : [1,2] })
p.setProp('ycomplims', [0.8, 1.2])
p.drawROOT()
